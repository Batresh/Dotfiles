#!/bin/sh
case $BLOCK_BUTTON in
	1) setsid "$TERMINAL" -e nmtui & ;;
	3) notify-send "🌐 Internet module" "\- Click to connect" ;;
esac
icon=
CONNAME=$(nmcli -a | grep 'Wired connection' | awk 'NR==1{print $1}')
if [ "$CONNAME" = "" ]; then
	CONNAME=$(nmcli -t -f active,ssid dev wifi | grep '^yes' | cut -c 5-)
	[ -z $CONNAME ] || icon=
	[ -z $CONNAME ] && echo " Intfail  " && exit 0
fi
PRIVATE=$(nmcli -a | grep 'inet4' | awk '{print $2}')
set -o pipefail
PUBLIC=$(curl -s https://ipinfo.io/ip | cut -c -6 | awk '{print "🌎"$1".."}' || echo "Webreqfail")
echo -e " $icon $CONNAME ($PRIVATE $PUBLIC)  "

